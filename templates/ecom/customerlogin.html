<!DOCTYPE html>
{% load widget_tweaks %}
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>Impairdify</title>
  <style media="screen">
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
    }

    .box {
      width: 100%;
      padding: 40px;
      position: absolute;
      top: 50%;
      left: 50%;
      background: #3E454C;
      text-align: center;
      transition: 0.25s;
      margin-top: 100px;
      border-radius: 50px;
    }

    .box input[type="text"],
    .box input[type="password"] {
      border: 0;
      background: none;
      display: block;
      margin: 20px auto;
      text-align: center;
      border: 2px solid #ffffff;
      padding: 10px 10px;
      width: 250px;
      outline: none;
      color: white;
      border-radius: 24px;
      transition: 0.25s;
    }

    .box h1 {
      color: white;
      font-weight: 500;
    }

    .box input[type="text"]:focus,
    .box input[type="password"]:focus {
      width: 300px;
      border-color: #d3d3d3;
    }

    .box input[type="submit"],
    .box button {
      border: 0;
      background: none;
      display: block;
      margin: 20px auto;
      text-align: center;
      border: 2px solid #2ecc71;
      padding: 14px 40px;
      outline: none;
      color: white;
      border-radius: 24px;
      transition: 0.25s;
      cursor: pointer;
    }

    .box input[type="submit"]:hover,
    .box button:hover {
      background: #2ecc71;
    }

    .forgot {
      text-decoration: underline;
    }

    ul.social-network {
      list-style: none;
      display: inline;
      margin-left: 0 !important;
      padding: 0;
    }

    ul.social-network li {
      display: inline;
      margin: 0 5px;
    }

    .social-network a.icoFacebook:hover {
      background-color: #3B5998;
    }

    .social-network a.icoTwitter:hover {
      background-color: #33ccff;
    }

    .social-network a.icoGoogle:hover {
      background-color: #BD3518;
    }

    .social-network a.icoFacebook:hover i,
    .social-network a.icoTwitter:hover i,
    .social-network a.icoGoogle:hover i {
      color: #fff;
    }

    a.socialIcon:hover,
    .socialHoverClass {
      color: #44BCDD;
    }

    .social-circle li a {
      display: inline-block;
      position: relative;
      margin: 0 auto 0 auto;
      border-radius: 50%;
      text-align: center;
      width: 50px;
      height: 50px;
      font-size: 20px;
    }

    .social-circle li i {
      margin: 0;
      line-height: 50px;
      text-align: center;
    }

    .social-circle li a:hover i,
    .triggeredHover {
      transform: rotate(360deg);
      transition: all 0.2s;
    }

    .social-circle i {
      color: #fff;
      transition: all 0.8s;
    }
  </style>
</head>
<body>
{% include "ecom/navbar.html" %}
<div class="container">
  <div class="row">
    <div class="col-md-6">
      <div class="card">
        <form class="box" method="post">
          {% csrf_token %}
          <h1>Customer Login</h1>
          {% render_field form.username class="form-control" placeholder="Username" autocomplete="off" %}
          {% render_field form.password class="form-control" placeholder="Password" %}
          <input type="submit" value="Login">
        </form>
      </div>
    </div>
  </div>
</div>
<br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br>
{% include "ecom/footer.html" %}

<!-- Text-to-Speech Script -->
<script>
function login() {
  const utterance = new SpeechSynthesisUtterance("Welcome to the login page! please enter or speak your username and password to login if you already have an account");
  speechSynthesis.speak(utterance);
}

// Speak search results once the page is loaded
window.addEventListener('load', login);
</script>

<!-- Voice Recognition Script -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    if (window.hasOwnProperty('webkitSpeechRecognition')) {
      var recognition = new webkitSpeechRecognition();
      recognition.continuous = true;
      recognition.interimResults = false;
      recognition.lang = "en-US";

      recognition.onresult = function(e) {
        var transcript = e.results[e.resultIndex][0].transcript.toLowerCase(); // Convert transcript to lowercase

        // Check if the user said "login"
        if (transcript.includes("login")) {
          document.querySelector('.box input[type="submit"]').click();
        }
                // Check if the user said "search"
                if (transcript.includes("search")) {
          // Perform action, e.g., show search bar or trigger search function
          document.getElementById('query').focus(); // Focus on the search input
        }

        // Check if the user said "mic" or "microphone"
        if (transcript.includes("mic") || transcript.includes("microphone")) {
          // Perform action, e.g., trigger voice search form submission
          document.querySelector('.navbar-button-v').click();
        }

        if (transcript.includes("go to cart")) {
          // Trigger cart button link click
          document.querySelector('.cart-button').click();
        }

        // Check if the user said "logout"
        if (transcript.includes("go to sign up")) {
          // Perform action, e.g., trigger logout link click
          document.querySelector('a[href="/customersignup"]').click();
        }

        // Fill form fields based on spoken words
        var formFields = document.querySelectorAll('.form-control');
        var fieldNames = ['username', 'password'];
        for (let i = 0; i < formFields.length; i++) {
          if (transcript.includes(fieldNames[i])) {
            var value = transcript.split(fieldNames[i])[1].trim();
            formFields[i].value = value;
          }
        }
      };

      recognition.onerror = function(e) {
        recognition.stop();
        setTimeout(startDictation, 1000); // Restart recognition after an error
      };

      recognition.onend = function() {
            setTimeout(startDictation, 1000); // Restart recognition if it ends
          };

      recognition.start();
    }
  });
</script>
</body>
</html>
